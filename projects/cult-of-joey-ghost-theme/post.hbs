{{!< default}}

<article class="post">
    <header class="post-header">
        <div class="post-header-inner">
            <div class="post-meta-row">
                {{#if primary_tag}}
                    <span class="chip{{#if primary_tag.slug}} chip-mood-{{primary_tag.slug}}{{/if}}">{{primary_tag.name}}</span>
                {{/if}}
                <span class="mono-font" style="color: var(--c-accent); font-size: 0.875rem;">{{date format="MMM D, YYYY"}}</span>
                <span style="color: var(--c-text-muted);">•</span>
                <span style="color: var(--c-text-muted); font-size: 0.875rem;">{{reading_time}}</span>
            </div>
            
            <h1 class="post-title glitch-hover">{{title}}</h1>
            
            {{#if custom_excerpt}}
                <p class="post-excerpt">{{custom_excerpt}}</p>
            {{else if excerpt}}
                <p class="post-excerpt">{{excerpt}}</p>
            {{/if}}
        </div>
    </header>
    
    {{#if feature_image}}
    <div class="container-narrow">
        <img src="{{img_url feature_image}}" alt="{{title}}" style="width: 100%; height: auto; border-radius: var(--radius-lg); margin: 2rem 0; border: 1px solid var(--c-border); box-shadow: var(--shadow-soft);">
    </div>
    {{/if}}
    
    <div class="post-content">
        {{content}}
    </div>
    
    <footer class="post-footer" style="max-width: min(680px, 100% - 2rem); margin: 4rem auto; padding: 2rem 0; border-top: 1px solid var(--c-border); display: flex; justify-content: space-between; align-items: center;">
        <a href="/journal" style="color: var(--c-text-muted); font-family: var(--font-mono);">← Back to Index</a>
        <div style="display: flex; gap: 0.5rem;">
            <button style="width: 32px; height: 32px; border-radius: 50%; background: var(--c-surface); border: 1px solid var(--c-border); display: flex; align-items: center; justify-content: center; color: var(--c-text-muted); cursor: pointer; transition: all var(--duration-hover);" onmouseover="this.style.color='var(--c-accent)'" onmouseout="this.style.color='var(--c-text-muted)'" aria-label="Share">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
            </button>
        </div>
    </footer>
</article>

{{! Related Posts }}
{{#get "posts" filter="tag:{{primary_tag.slug}}+id:-{{id}}" limit="2"}}
    {{#if posts}}
    <section class="section">
        <div class="container">
            <h3 class="section-title glitch-hover mb-6">More from this Era</h3>
            <div class="post-grid">
                {{#foreach posts}}
                    {{> "post-card"}}
                {{/foreach}}
            </div>
        </div>
    </section>
    {{/if}}
{{/get}}

