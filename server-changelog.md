# Server Changelog

- 2025-11-09T01:14:01Z — Repository baseline audit. Only `services/traefik`
  was populated; remaining service manifests and `docker-compose/` host bundles
  were missing. `scripts/health-check.sh` and `scripts/teardown.sh` were not yet
  implemented; workspace structure captured in `/tmp/infra-structure.txt` for
  review.
- 2025-11-09T01:21:28Z — Added per-service Compose manifests, populated
  host-level bundles, and delivered `scripts/health-check.sh` plus
  `scripts/teardown.sh`; ready for subsequent documentation updates.
- 2025-11-09T06:55:24+00:00Z — Standardized workspace env path, added Traefik middleware bundle, and documented TLS handoff to nginx for vault.freqkflag.co.
- 2025-11-09T07:12:55Z — Synced `.workspace/.env` into Infisical prod via `infisical --domain https://vault.freqkflag.co/api secrets set --file .workspace/.env --env prod --path / --token <service-token>`; spot-checked `PROJECT_NAME` and `HOMELAB_DOCKER_NETWORK`.
- 2025-11-22T03:53:11Z — Installed self-hosted Backstage service at `backstage.freqkflag.co`. Created service structure in `/root/infra/services/backstage/` with multi-stage Dockerfile, docker-compose.yml with PostgreSQL database, and Traefik labels for SSL termination. Integrated Infisical plugin (`@infisical/backstage-plugin-infisical@^0.1.1` and `@infisical/backstage-backend-plugin-infisical@^0.1.1`) with backend registration in `packages/backend/src/index.ts`, frontend routes in `EntityPage.tsx`, and configuration in `app-config.production.yaml` using Universal Auth. Added Backstage to `compose.orchestrator.yml` with `vps` profile. Created comprehensive README.md with usage examples and `entities-with-infisical.yaml` example file. Environment variables configured: `BACKSTAGE_DOMAIN`, `BACKSTAGE_DB_*`, `INFISICAL_PUBLIC_URL`, `INFISICAL_CLIENT_ID`, `INFISICAL_CLIENT_SECRET`. Docker build in progress; dependencies install successfully, backend build requires source file path adjustments.
- 2025-11-22T14:39:51Z — Deployed and configured Supabase stack at `supabase.freqkflag.co` and `api.supabase.freqkflag.co`. Added `edge` network attachment to all Supabase services (supabase-db, supabase-studio, supabase-meta, supabase-kong, supabase-functions) for service intercommunication. All required secrets (POSTGRES_PASSWORD, JWT_SECRET, ANON_KEY, SERVICE_ROLE_KEY, ANTHROPIC_API_KEY, OPENAI_API_KEY) verified in `.workspace/.env` via Infisical. Validated docker-compose.yml configuration with `docker compose config`. Deployed stack with `docker compose up -d`. All core services healthy: supabase-db (healthy), supabase-studio (healthy), supabase-meta (healthy), supabase-kong (healthy). Verified HTTPS/TLS routing via Traefik: Studio accessible at `https://supabase.freqkflag.co` (HTTP/2 307 redirect working). API endpoint at `https://api.supabase.freqkflag.co` configured via Kong gateway. Updated AGENTS.md with deployment status. Supabase-functions service added but restarting (image/command issue - optional for basic deployment).
