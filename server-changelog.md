# Server Changelog

- 2025-11-09T01:14:01Z — Repository baseline audit. Only `services/traefik`
  was populated; remaining service manifests and `docker-compose/` host bundles
  were missing. `scripts/health-check.sh` and `scripts/teardown.sh` were not yet
  implemented; workspace structure captured in `/tmp/infra-structure.txt` for
  review.
- 2025-11-09T01:21:28Z — Added per-service Compose manifests, populated
  host-level bundles, and delivered `scripts/health-check.sh` plus
  `scripts/teardown.sh`; ready for subsequent documentation updates.
- 2025-11-09T06:55:24+00:00Z — Standardized workspace env path, added Traefik middleware bundle, and documented TLS handoff to nginx for vault.freqkflag.co.
- 2025-11-09T07:12:55Z — Synced `.workspace/.env` into Infisical prod via `infisical --domain https://vault.freqkflag.co/api secrets set --file .workspace/.env --env prod --path / --token <service-token>`; spot-checked `PROJECT_NAME` and `HOMELAB_DOCKER_NETWORK`.
- 2025-11-22T03:53:11Z — Installed self-hosted Backstage service at `backstage.freqkflag.co`. Created service structure in `/root/infra/services/backstage/` with multi-stage Dockerfile, docker-compose.yml with PostgreSQL database, and Traefik labels for SSL termination. Integrated Infisical plugin (`@infisical/backstage-plugin-infisical@^0.1.1` and `@infisical/backstage-backend-plugin-infisical@^0.1.1`) with backend registration in `packages/backend/src/index.ts`, frontend routes in `EntityPage.tsx`, and configuration in `app-config.production.yaml` using Universal Auth. Added Backstage to `compose.orchestrator.yml` with `vps` profile. Created comprehensive README.md with usage examples and `entities-with-infisical.yaml` example file. Environment variables configured: `BACKSTAGE_DOMAIN`, `BACKSTAGE_DB_*`, `INFISICAL_PUBLIC_URL`, `INFISICAL_CLIENT_ID`, `INFISICAL_CLIENT_SECRET`. Docker build in progress; dependencies install successfully, backend build requires source file path adjustments.
- 2025-11-22T14:39:51Z — Deployed and configured Supabase stack at `supabase.freqkflag.co` and `api.supabase.freqkflag.co`. Added `edge` network attachment to all Supabase services (supabase-db, supabase-studio, supabase-meta, supabase-kong, supabase-functions) for service intercommunication. All required secrets (POSTGRES_PASSWORD, JWT_SECRET, ANON_KEY, SERVICE_ROLE_KEY, ANTHROPIC_API_KEY, OPENAI_API_KEY) verified in `.workspace/.env` via Infisical. Validated docker-compose.yml configuration with `docker compose config`. Deployed stack with `docker compose up -d`. All core services healthy: supabase-db (healthy), supabase-studio (healthy), supabase-meta (healthy), supabase-kong (healthy). Verified HTTPS/TLS routing via Traefik: Studio accessible at `https://supabase.freqkflag.co` (HTTP/2 307 redirect working). API endpoint at `https://api.supabase.freqkflag.co` configured via Kong gateway. Updated AGENTS.md with deployment status. Supabase-functions service added but restarting (image/command issue - optional for basic deployment).
- 2025-11-22T14:58:00Z — Phase 1 Secrets & Config Integrity audit completed (A2A session a2a-20251122145423-ef453fd3). Audited Infisical coverage against compose file variable references: 103 unique variables referenced in compose files, 80 secrets present in Infisical /prod path, 78 missing secrets identified (24.3% coverage). Critical missing secrets: 6 Infisical JWT secrets (ROOT_ENCRYPTION_KEY, JWT_SIGNUP_SECRET, JWT_REFRESH_SECRET, JWT_AUTH_SECRET, JWT_SERVICE_SECRET, JWT_PROVIDER_AUTH_SECRET), 3 Supabase secrets (JWT_SECRET, ANON_KEY, SERVICE_ROLE_KEY), plus high-priority database and service passwords. Infisical agent not running - .workspace/.env regeneration required. Audit report stored at `ai.engine/reports/phase1-secrets.json`. Recommendations: Add critical missing secrets to Infisical /prod path, start Infisical agent for auto-sync, regenerate .workspace/.env before proceeding to Phase 2.
- 2025-11-22T15:05:00Z — Phase 1 secrets remediation completed. Auto-generated and added 14 critical secrets to Infisical /prod path: ROOT_ENCRYPTION_KEY, JWT_SIGNUP_SECRET, JWT_REFRESH_SECRET, JWT_AUTH_SECRET, JWT_SERVICE_SECRET, JWT_PROVIDER_AUTH_SECRET, JWT_SECRET, MARIADB_PASSWORD, MARIADB_ROOT_PASSWORD, REDIS_PASSWORD, GRAFANA_ADMIN_PASSWORD, N8N_PASSWORD, ANON_KEY (retrieved from .workspace/.env), SERVICE_ROLE_KEY (retrieved from .workspace/.env). All secrets generated using `openssl rand -base64 32`. Regenerated .workspace/.env with 95 variables. Started Infisical agent (PID: 1330936) for auto-sync every 60 seconds.
- 2025-11-22T15:09:00Z — Phase 2 Core Infrastructure Bring-up completed (A2A session a2a-20251122145423-ef453fd3). Validated all core infrastructure compose files (Traefik, Infisical, PostgreSQL, MariaDB) - all valid. Verified edge network active with 13 containers attached. Confirmed all services healthy: Traefik (7 hours uptime), Infisical (12 hours uptime), PostgreSQL (8 hours uptime), Redis (9 hours uptime), monitoring stack (Grafana 36h, Prometheus 36h, Loki 19h, Alertmanager 19h). Validated Traefik labels and network configuration on all services. Infisical dashboard accessible via HTTPS (HTTP/2 200). Traefik dashboard accessible on localhost:8080. All health checks passing. Phase 2 report stored at `ai.engine/reports/phase2-core.json`. Ready to proceed to Phase 3: Application & Automation Stack deployment.
- 2025-11-22T15:10:00Z — Phase 3 Application & Automation Stack deployment completed (A2A session a2a-20251122145423-ef453fd3). Validated and verified all 8 application services: WikiJS (healthy, 15h), WordPress (healthy, 15h), LinkStack (healthy, 42h), n8n (healthy, 55m), Node-RED (healthy, 3h), Backstage (healthy, 1h, all plugins initialized including Infisical), Supabase (mostly healthy - DB/Studio/Meta/Kong healthy, functions restarting), GitLab (unhealthy, 5h uptime, may need investigation). All compose files validated. All services have proper Traefik labels and edge network configuration. All services accessible via HTTPS: WikiJS (200), WordPress (200), LinkStack (200), n8n (401 - auth required), Node-RED (200), Backstage (200), Supabase (307 redirect), GitLab (404 - initializing). Service-specific health validated: Backstage listening on port 7007, Supabase core services operational. Phase 3 report stored at `ai.engine/reports/phase3-apps.json`. Updated `docs/INFRASTRUCTURE_MAP.md` with current service statuses. Ready to proceed to Phase 4: Observability & Dashboard Validation.
