http:
  middlewares:
    # Redirect HTTP to HTTPS
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true
    
    # Security headers
    security-headers:
      headers:
        browserXssFilter: true
        contentTypeNosniff: true
        forceSTSHeader: true
        stsIncludeSubdomains: true
        stsPreload: true
        stsSeconds: 31536000
        customFrameOptionsValue: "SAMEORIGIN"
        referrerPolicy: "strict-origin-when-cross-origin"
        permissionsPolicy: "geolocation=(), microphone=(), camera=()"
        customRequestHeaders:
          X-Forwarded-Proto: "https"
          X-Content-Type-Options: "nosniff"
          X-Frame-Options: "SAMEORIGIN"
          X-XSS-Protection: "1; mode=block"
    
    # Rate limiting
    rate-limit:
      rateLimit:
        average: 100
        burst: 50
        period: 1m
    
    # Stricter rate limiting for auth endpoints
    rate-limit-strict:
      rateLimit:
        average: 10
        burst: 5
        period: 1m
    
    # Basic auth for Traefik dashboard
    # NOTE: Change the password hash! Generate with: docker run --rm httpd:2.4-alpine htpasswd -nbB admin YOUR_PASSWORD
    traefik-dashboard-auth:
      basicAuth:
        users:
          - "admin:$2y$05$0/4/Tv202Ic2Nbtc1YEruOlpuhGcbeJBvsLuDmJI0EBL12Ue.Ea2G"

